<div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h2 class="panel-title">Watches <i class="fa fa-plus-circle" ng-click="editWatch(null)"></i></h3>
    </div>
    <div class="panel-body">
     <table class="table table-striped table-hover table-condensed">
        <thead>
          <tr>
            <td></td>
            <td>Name</td>
            <td>Status</td>
            <td>Cron</td>
            <td>Worry After</td>
            <td>Last Check</td>
            <td>Next Check</td>
            <td></td>
        </tr>
        </thead>
        <tbody>
          <tr ng-repeat-start="watch in watches.models | orderBy:'id'" >
            <td><i class="fa fa-th-list" ng-click="show(watch)"></i></td>
            <td ng-click="help(watch)">{{watch.get('name')}} <i class="fa fa-question"></i></td>
            <td>{{watch.get('status') ? watch.get("status") : 'none reported'}}</td>
            <td>{{watch.get('cron')}} ({{watch.get("explanation")}})</td>
            <td>{{watch.get('worry')}}</td>
            <td>{{watch.get('last_check') ? moment(watch.get("last_check")).fromNow() : "never" }}</td>
            <td>{{moment ( watch.get('next_check') ).fromNow()}}</td>
            <td><i class="fa fa-edit" ng-click="editWatch(watch)"></i></td>
          </tr>
          <tr ng-repeat-end="" ng-show="watch.get('show')">
            <td></td>
            <td></td>
            <td colspan="4">
              <table class="table table-striped table-hover table-condensed">
                <thead>
                  <td><i class="fa fa-refresh" ng-click="reloadChecks(watch)"></i> Checkin time</td>
                  <td>Status</td>
                  <td>Message</td>
                </thead>
                <tdata>
                  <tr ng-repeat="check in watch.get('checks').models | orderBy:'id':true">
                    <td>{{moment(check.get('instant')).fromNow()}}</td>
                    <td>{{check.get('status') ? check.get('status') : "No status"}}</td>
                    <td>{{check.get('message') ? check.get('message') : "No message"}}</td>
                  </tr>
                </tdata>
              </table>
              <td colspan="2"></td>
            </td>
          </tr>
        </tbody>
      </table>


    </div>
  </div>

</div>
