"use strict";angular.module("ui.ace",[]).constant("uiAceConfig",{}).directive("uiAce",["uiAceConfig",function(e){if(angular.isUndefined(window.ace))throw new Error("ui-ace need ace to work... (o rly?)");return{restrict:"EA",require:"?ngModel",link:function(n,a,r,i){var o,t,u,s,c;o=e.ace||{},t=angular.extend({},o,n.$eval(r.uiAce)),u=window.ace.edit(a[0]),s=u.getSession(),c=function(e){return function(a){var o=s.getValue();o===n.$eval(r.value)||n.$$phase||n.$root.$$phase||(angular.isDefined(i)&&n.$apply(function(){i.$setViewValue(o)}),angular.isDefined(e)&&n.$apply(function(){if(!angular.isFunction(e))throw new Error("ui-ace use a function as callback.");e(a,u)}))}},angular.isDefined(t.showGutter)&&u.renderer.setShowGutter(t.showGutter),angular.isDefined(t.useWrapMode)&&s.setUseWrapMode(t.useWrapMode),angular.isFunction(t.onLoad)&&t.onLoad(u),angular.isString(t.theme)&&u.setTheme("ace/theme/"+t.theme),angular.isString(t.mode)&&s.setMode("ace/mode/"+t.mode),r.$observe("readonly",function(e){u.setReadOnly("true"===e)}),angular.isDefined(i)&&(i.$formatters.push(function(e){if(angular.isUndefined(e)||null===e)return"";if(angular.isObject(e)||angular.isArray(e))throw new Error("ui-ace cannot use an object or an array as a model");return e}),i.$render=function(){s.setValue(i.$viewValue)}),s.on("change",c(t.onChange)),a.on("$destroy",function(){u.session.$stopWorker(),u.destroy()})}}}]);